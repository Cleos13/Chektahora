"close"!=localStorage.getItem("menu-estatus")&&null!=localStorage.getItem("menu-estatus")||($(".menu-backoffice").hide(),$("#menu-backoffice").attr({style:"width: 1.4%;"}).addClass("menu-close")),"close"!=localStorage.getItem("menu-estatus-mobile")&&null!=localStorage.getItem("menu-estatus-mobile")||($(".menu-backoffice-mobile").hide(),$(".menu-mobile-options").hide().addClass("menu-close")),$("#btn-backoffice").click(function(){$("#menu-backoffice").hasClass("menu-close")?(localStorage.setItem("menu-estatus","open"),$(".menu-backoffice").show(200),$("#menu-backoffice").attr({style:"width: 450px !important; transition: width 0.6s;"}).removeClass("menu-close")):(localStorage.setItem("menu-estatus","close"),$(".menu-backoffice").hide(),$("#menu-backoffice").attr({style:"width: 1.4%; transition: width 0.5s;"}).addClass("menu-close"))}),$("#menu-mobile-backoffice, #close-mobile-backoffice").click(function(){$(".menu-mobile-options").hasClass("menu-close")?(localStorage.setItem("menu-estatus-mobile","open"),$(".menu-backoffice-mobile").show(),$(".menu-mobile-options").show(100).removeClass("menu-close")):(localStorage.setItem("menu-estatus-mobile","close"),$(".menu-backoffice-mobile").hide(),$(".menu-mobile-options").hide().addClass("menu-close"))});let validate_img_desktop=!1,id_product="",name="";const currency=function(e){return new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:2}).format(e)};function changeImage(o){var a=document.getElementById("space_img_desktop").files[0];if(!0===validate_img_desktop){$("#change_img").addClass("display-none"),$("#loading-img").removeClass("display-none");let e=new FormData,t=(e.append("desktop",a),new XMLHttpRequest);t.open("POST","api/addImgProduct.php?id_product="+o,!0),t.onreadystatechange=function(){4===this.readyState&&200===this.status&&(this.responseText,setTimeout(function(){location.reload()},1e3))},t.send(e)}}function deleteImages(t,e,o){$.post("api/products.php?action=delete-img",{id_delete:e,name_delete:o},function(e){getImages(t)})}function getImages(o){$.post("api/products.php?get=image",{id:o},function(e){let t="";for(get_img of JSON.parse(e))t+=`<div class="banner-item">
                                <div>
                                    <img src="../img/products/${get_img.img}" width="100px">
                                </div>
                                <div>
                                    <button class="btn-delete-banner" name_delete="${get_img.img}" delete-img="${get_img.id}">Eliminar</button>
                                </div>
                            </div>`;$("#images-product-select").html(t),$("[add-image]").on("click",function(){$("#shadow-add-img").addClass("is-visible"),$("#change_img").on("click",function(){changeImage(o)}),$("#change_img").removeClass("display-none"),$("#loading-img").addClass("display-none"),$('[for="space_img_desktop"]').removeClass("active"),$('[space="space_img_desktop"]').attr({fill:""})}),$("[delete-img]").on("click",function(){var e=$(this).attr("delete-img"),t=$(this).attr("name_delete");deleteImages(o,e,t)})})}function randomId(){return Math.floor(1e6*Math.random())}$.post("api/products.php?get=all",{},function(e){let o="";for(g of JSON.parse(e)){let e="No activo",t="No activo";1===parseInt(g.home)&&(e="activo"),1===parseInt(g.store)&&(t="activo"),o+=`<tr>
                    <td>${g.name}</td>
                    <td>${currency(g.price)}</td>
                    <td>${g.category}</td>
                    <td>${e}</td>
                    <td>${t}</td>
                    <td style="display: flex; justify-content: space-between; align-items: center">
                        <button class="btn-products px-3" open-pop-v="${g.id}">Modificar</button>
                        <button class="btn-products px-3" open-pop-i="${g.id}">Imagenes</button>
                    </td>
                    <td>
                        <button class="px-3" type="button" style="cursor: pointer;" delete-product="${g.id}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16">
                              <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"/>
                            </svg>
                        </button>
                    </td>
                </tr>`}$("#products").html(o),$("button[open-pop-v]").on("click",function(){$("#view").toggleClass("is-visible");var e=$(this).attr("open-pop-v");$.post("api/products.php?get=item",{id:e},function(e){e=JSON.parse(e);console.log(e);let t;for(g of e){id_product=g.id,t="";for(get_qe of g.pe){var o=randomId();t+=`<div class="grid-x" id="${o}" questions-product>
                            <input class="large-4 mx-2" type="text" placeholder="Titulo" value="${get_qe.title}" id="title-${o}">
                            <input class="large-6 mx-2" type="text" placeholder="Contenido" value="${get_qe.content}" id="content-${o}">
                            <div class="large-1 flex-center">
                                <button class="px-3 mb-2" type="button" style="cursor: pointer;" delete-qe-product="${o}">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                                         class="bi bi-trash3" viewBox="0 0 16 16">
                                        <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>`}$("#name-product-selected").val(g.name),$("#price-product-selected").val(g.price),$("#id-product-selected").val(g.id),$("[selected-product] option").attr("selected",!1),(1===parseInt(g.home)?$("#active-home-select"):$("#disable-home-select")).attr("selected",!0),$("#select-"+g.category).attr("selected",!0),(1===parseInt(g.store)?$("#active-store-select"):$("#disable-store-select")).attr("selected",!0),$("[ref-product]").attr({"ref-product":g.id})}$("#questions-product").html(t),$("#save-change-product").on("click",function(){$("#loading-data-product").removeClass("display-none"),$(this).addClass("display-none")})})}),$("button[open-pop-i]").on("click",function(){var e=$(this).attr("open-pop-i");$("[add-image]").attr("add-image",e),$("#shadow-view-img").addClass("is-visible"),$('[type="file"]').val(""),getImages(e)}),$("[delete-product]").on("click",function(){var e=$(this).attr("delete-product");$.post("api/products?action=delete-product",{id:e},function(){location.reload()})})}),$("[close-modal]").on("click",function(){$(".modal").removeClass("is-visible")}),$("#close-modal-img-product").on("click",function(){$("#shadow-add-img").removeClass("is-visible")}),$("button[open-pop-n]").on("click",function(){$("#new input").val(""),$("#new").toggleClass("is-visible")}),$("#space_img_desktop").on("change",function(){$('[for="space_img_desktop"]').removeClass("error","active");var e=document.getElementById("space_img_desktop").files[0];let t=window.URL||window.webkitURL,o=new Image;o.src=t.createObjectURL(e),o.onload=function(){var e=o.height+"x"+o.width;console.log(e),validate_img_desktop="1273x1264"==e||"1300x1271"==e?($('[for="space_img_desktop"]').addClass("active"),$('[space="space_img_desktop"]').attr({fill:"#00c900"}),!0):($('[for="space_img_desktop"]').addClass("error"),$('[space="space_img_desktop"]').attr({fill:"red"}),!1)}}),$("#add-question-new-product").on("click",function(){var e=Math.floor(1e6*Math.random());0===$("[questions-new-product]").length&&$("#questions-new-product").html(""),$("#questions-new-product").append(`<div class="grid-x" id="${e}" questions-new-product>
                            <input class="large-4 mx-2" type="text" placeholder="Titulo" value="" id="title-${e}">
                            <input class="large-6 mx-2" type="text" placeholder="Contenido" value="" id="content-${e}">
                            <div class="large-1 flex-center">
                                <button class="px-3 mb-2" type="button" style="cursor: pointer;" delete="${e}">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                                         class="bi bi-trash3" viewBox="0 0 16 16">
                                        <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>`),$("[delete]").on("click",function(){var e=$(this).attr("delete"),e=($("#"+e).remove(),$("[questions-new-product]").length);0===e&&$("#questions-new-product").append('<h5 class="grid-x text-morado text-center fw-bold">Agrega contenido, eliminaste todo.</h5>')})}),$("#add-question-product").on("click",function(){var e=randomId();0===$("[questions-product]").length&&$("#questions-product").html(""),$("#questions-product").append(`<div class="grid-x" id="${e}" questions-product>
                            <input class="large-4 mx-2" type="text" placeholder="Titulo" value="" id="title-${e}">
                            <input class="large-6 mx-2" type="text" placeholder="Contenido" value="" id="content-${e}">
                            <div class="large-1 flex-center">
                                <button class="px-3 mb-2" type="button" style="cursor: pointer;" delete="${e}">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                                         class="bi bi-trash3" viewBox="0 0 16 16">
                                        <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>`),$("[delete]").on("click",function(){var e=$(this).attr("delete"),e=($("#"+e).remove(),$("[questions-product]").length);0===e&&$("#questions-product").append('<h5 class="grid-x text-morado text-center fw-bold">Agrega contenido, eliminaste todo.</h5>')})}),$("#save-new-product").on("click",function(){$("#loading-new-product").removeClass("display-none"),$(this).addClass("display-none");var e=$("#name-new-product").val(),t=$("#category-new-product").val(),o=$("#price-new-product").val(),a=$("#status-home").val(),s=$("#status-store").val();let i=[],l=document.querySelectorAll("[questions-new-product]");l.forEach(e=>{i.push([$("#title-"+e.id).val(),$("#content-"+e.id).val()])}),$.post("api/products?action=add",{name:e,category:t,price:o,status_home:a,status_store:s,questions:i},function(){location.reload()})}),$("#save-change-product").on("click",function(){$("#loading-product").removeClass("display-none"),$(this).addClass("display-none");var e=$("#id-product-selected").val(),t=$("#name-product-selected").val(),o=$("#category-product-selected").val(),a=$("#price-product-selected").val(),s=$("#status-home-selected").val(),i=$("#status-store-selected").val();let l=[],n=document.querySelectorAll("[questions-product]");n.forEach(e=>{l.push([$("#title-"+e.id).val(),$("#content-"+e.id).val()])}),$.post("api/products?action=save",{id:e,name:t,category:o,price:a,status_home:s,status_store:i,questions:l},function(e){location.reload()})});