var pagina;function validateData(){var a=$("#cupon").val(),o=$("#confirmar-cupon").val(),e=$("#tipo-descuento").val(),i=$("#cantidad").val(),n=$("#porcentaje").val(),t=$("#vencimiento").val();return validate_coupon=""!=a?($("#cupon").removeClass("invalid"),!0):($("#cupon").addClass("invalid"),!1),validate_date=""!=t?($("#vencimiento").removeClass("invalid"),!0):($("#vencimiento").addClass("invalid"),!1),validate_coupon_c=""!=o&&o===a?($("#confirmar-cupon").removeClass("invalid"),!0):($("#confirmar-cupon").addClass("invalid"),!1),validate_value="Cantidad"==e?""!=i?($("#cantidad").removeClass("invalid"),!0):($("#cantidad").addClass("invalid"),!1):""!=n?($("#porcentaje").removeClass("invalid"),!0):($("#porcentaje").addClass("invalid"),!1),1==validate_coupon&&1==validate_coupon_c&&1==validate_value&&1==validate_date}validate_coupon=!1,validate_coupon_c=!1,validate_type=validate_value=!1,validate_date=!1,$("#cupon").on("keyup",function(){var a=$(this).val();validate_coupon=""==a?($(this).addClass("invalid"),!1):($(this).removeClass("invalid"),!0)}),$("#vencimiento").on("change",function(){var a=$(this).val();validate_date=""==a?($(this).addClass("invalid"),!1):($(this).removeClass("invalid"),!0)}),$("#confirmar-cupon").on("keyup",function(){var a=$(this).val(),o=$("#cupon").val();validate_coupon_c=a===o?($(this).removeClass("invalid"),!0):($(this).addClass("invalid"),!1)});var format_data=/^([0-9]{1,20})+$/;$("#cantidad").on("keyup",function(){var a=$(this).val();""!=a&&format_data.test(a)?(validate_value=!0,$(this).removeClass("invalid")):(validate_value=!1,$(this).addClass("invalid"))}),$("#porcentaje").on("keyup",function(){var a=$(this).val();""!=a&&format_data.test(a)&&a<=100?(validate_value=!0,$(this).removeClass("invalid")):(validate_value=!1,$(this).addClass("invalid"))}),$(function(){$("#vencimiento").fdatepicker({format:"yyyy-mm-dd",disableDblClickSelection:!0,minDate:"today",leftArrow:"<<",rightArrow:">>",closeIcon:"X",closeButton:!0})}),$("#pagina").on("change",function(){pagina=$(this).val();var a=$("#tipo_cupon");$("#tipo_cupon").html("<option disabled selected>Aplica a</option>").prop("disabled",!1),$("#aplica").html("<option selected disabled>Selecciona</option>").prop("disabled",!0),console.log(pagina),"Inmunocheck"==pagina?a.append('<option value="Producto">Producto</option>'):a.append('<option value="Producto">Producto</option><option value="Categoria">Categoria</option>')}),$("#tipo_cupon").on("change",function(){tipo_aplica=$(this).val();var i=$("#aplica");$("#aplica").html("<option selected disabled>Selecciona</option>").prop("disabled",!1),"Producto"==tipo_aplica?"Inmunocheck"==pagina?i.html('<option value="influenza">Influenza</option><option value="Hepatitis B">Antihepatits A Y B</option><option value="VPH">VPH</option><option value="Neumococo">Neumococo</option><option value="HERPES ZÓSTER">Herpes Zóster</option>'):$.post("../api/datos/precios_front.php",{},function(a){let o="";for(const e of JSON.parse(a))o+=`<option value="${e.name}">${e.name}</option>`;i.html(o)}):i.append('<option value="covid">Categoria covid</option><option value="its">Categoria its</option><option value="clinicos">Categoria clinicos</option>')}),$("#tipo-descuento").on("change",function(){"Cantidad"==$(this).val()?($("#cantidad").removeClass("display-none"),$("#porcentaje").addClass("display-none")):($("#cantidad").addClass("display-none"),$("#porcentaje").removeClass("display-none"))}),$("#crear-cupon").on("click",function(){var a,o=$("#confirmar-cupon").val(),e=$("#tipo-descuento").val(),i=$("#tipo_cupon").val(),n=$("#aplica").val(),t=$("#cantidad").val(),l=$("#porcentaje").val(),s=$("#vencimiento").val();1==validateData()&&""!=pagina&&(a="Inmunocheck"==pagina?"https://www.inmunochek.com/api/crear-cupon.php":"api/add-coupon.php",console.log(a),$.post(a,{cupon:o,tipo_descuento:e,tipo_cupon:i,aplica:n,cantidad:t,porcentaje:l,vencimiento:s},function(a){console.log(a),1==parseInt(a)?($("#message-1").removeClass("display-none"),setTimeout(function(){$("#message-1").addClass("display-none"),window.location.reload()},4e3)):($("#message-2").removeClass("display-none"),setTimeout(function(){$("#message-2").addClass("display-none"),window.location.reload()},4e3)),console.log(a)}))}),"close"!=localStorage.getItem("menu-estatus")&&null!=localStorage.getItem("menu-estatus")||($(".menu-backoffice").hide(),$("#menu-backoffice").attr({style:"width: 1.4%;"}).addClass("menu-close")),"close"!=localStorage.getItem("menu-estatus-mobile")&&null!=localStorage.getItem("menu-estatus-mobile")||($(".menu-backoffice-mobile").hide(),$(".menu-mobile-options").hide().addClass("menu-close")),$("#btn-backoffice").click(function(){$("#menu-backoffice").hasClass("menu-close")?(localStorage.setItem("menu-estatus","open"),$(".menu-backoffice").show(200),$("#menu-backoffice").attr({style:"width: 450px !important; transition: width 0.6s;"}).removeClass("menu-close")):(localStorage.setItem("menu-estatus","close"),$(".menu-backoffice").hide(),$("#menu-backoffice").attr({style:"width: 1.4%; transition: width 0.5s;"}).addClass("menu-close"))}),$("#menu-mobile-backoffice, #close-mobile-backoffice").click(function(){$(".menu-mobile-options").hasClass("menu-close")?(localStorage.setItem("menu-estatus-mobile","open"),$(".menu-backoffice-mobile").show(),$(".menu-mobile-options").show(100).removeClass("menu-close")):(localStorage.setItem("menu-estatus-mobile","close"),$(".menu-backoffice-mobile").hide(),$(".menu-mobile-options").hide().addClass("menu-close"))});